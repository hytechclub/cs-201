
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Part 3 - The Sprite Class Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-toggle-chapters/toggle.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../Reference.html" />
    
    
    <link rel="prev" href="Part2EnemyClass.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../EnvironmentSetup.html">
            
                <a href="../EnvironmentSetup.html">
            
                    
                    Environment Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="StudentDesc.html">
            
                <a href="StudentDesc.html">
            
                    
                    Walkthroughs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="Part0HelloWorld.html">
            
                <a href="Part0HelloWorld.html">
            
                    
                    Part 0 - Hello World
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="Part1PlayerClass.html">
            
                <a href="Part1PlayerClass.html">
            
                    
                    Part 1 - The Player Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="Part2EnemyClass.html">
            
                <a href="Part2EnemyClass.html">
            
                    
                    Part 2 - The Enemy Class
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.4" data-path="Part3SpriteClass.html">
            
                <a href="Part3SpriteClass.html">
            
                    
                    Part 3 - The Sprite Class
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../Reference.html">
            
                <a href="../Reference.html">
            
                    
                    Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../EnhancementIdeas.html">
            
                <a href="../EnhancementIdeas.html">
            
                    
                    Enhancement Ideas
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Part 3 - The Sprite Class</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="part-2---the-sprite-class">Part 2 - The <code>Sprite</code> Class</h1>
<p>In this walkthrough, refactor the code a bit to make it more maintainable and extendable.</p>
<h2 id="motivation">Motivation</h2>
<p>Take a look at the code in the <code>Player</code> class and the <code>Enemy</code> class. A lot of it looks pretty similar, right? Several parts of the <code>Player</code> class (fields, properties, and methods) are identical to the <code>Enemy</code> class. Wouldn&apos;t it be nice if there were a way to store that repeated code somewhere else, and have both the <code>Player</code> and the <code>Enemy</code> class access it? Well there is!</p>
<h3 id="inheritance">Inheritance</h3>
<p>In C#, <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/inheritance" target="_blank">inheritance</a> enables developers to create new classes that reuse, extend, and modify the behavior defined in other classes. The <strong>base class</strong> is a class that contains some code for reuse, and the <strong>derived class</strong> takes that code for itself. These classes follow an &quot;is-a&quot; relationship pattern: an instance of the derived class <em>is an</em> instance of the base class.</p>
<p>For this game, the <code>Player</code> class and the <code>Enemy</code> class share a lot of code. This code all fits with the idea of a sprite. So, <code>Player</code> objects and <code>Enemy</code> objects are both examples of <em>sprites</em>. It would make sense to define a new class named <code>Sprite</code>, and have the <code>Player</code> and <code>Enemy</code> classes inherit from <code>Sprite</code>!</p>
<p>Note that this will not change the actually functionality of the game; it will simply make it easier to extend and maintain the game in the future.</p>
<h2 id="defining-the-sprite-class">Defining the <code>Sprite</code> Class</h2>
<p>The first step to introduce some inheritance will be to define a base class: <code>Sprite</code>.</p>
<h3 id="setup">Setup</h3>
<p>Fill out the basic code needed to define the <code>Sprite</code> class.</p>
<ol>
<li>Create a new file named <strong>Enemy.cs</strong> in the &quot;src&quot; folder</li>
<li>Add <code>using</code> statements for <code>Microsoft.Xna.Framework</code> and <code>Microsoft.Xna.Framework.Graphics</code></li>
<li>Create a <code>namespace</code> wrapper for <code>ArcadeFlyer2D</code></li>
<li>In the body of the <code>ArcadeFlyer2D</code> namespace, define a <code>class</code> named <code>Sprite</code></li>
</ol>
<pre><code class="lang-cs"><span class="hljs-keyword">using</span> Microsoft.Xna.Framework;
<span class="hljs-keyword">using</span> Microsoft.Xna.Framework.Graphics;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">ArcadeFlyer2D</span>
{
    <span class="hljs-keyword">class</span> <span class="hljs-title">Sprite</span>
    {

    }
}
</code></pre>
<h3 id="fields">Fields</h3>
<p>There are three important fields that are shared by the <code>Player</code> class and the <code>Enemy</code> class. The <code>Sprite</code> class should have those fields too! Copy over the <code>position</code>, <code>spriteImage</code>, and <code>spriteWidth</code> fields into the body of the <code>Sprite</code> class:</p>
<pre><code class="lang-cs"><span class="hljs-keyword">private</span> Vector2 position;
<span class="hljs-keyword">private</span> Texture2D spriteImage;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> spriteWidth;
</code></pre>
<h3 id="calculated-properties">Calculated Properties</h3>
<p>In addition to the fields, there are two calculated properties that are identical on the <code>Player</code> and the <code>Enemy</code> class. Copy over the <code>SpriteHeight</code> and <code>PositionRectangle</code> properties into the body of the <code>Sprite</code> class:</p>
<pre><code class="lang-cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> SpriteHeight
{
    <span class="hljs-keyword">get</span>
    {
        <span class="hljs-keyword">float</span> scale = spriteWidth / spriteImage.Width;
        <span class="hljs-keyword">return</span> spriteImage.Height * scale;
    }
}

<span class="hljs-keyword">public</span> Rectangle PositionRectangle
{
    <span class="hljs-keyword">get</span>
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Rectangle((<span class="hljs-keyword">int</span>)position.X, (<span class="hljs-keyword">int</span>)position.Y, (<span class="hljs-keyword">int</span>)spriteWidth, (<span class="hljs-keyword">int</span>)SpriteHeight);
    }
}
</code></pre>
<h3 id="constructor">Constructor</h3>
<p>Although the <code>Player</code> and <code>Enemy</code> constructors are not identical, it will be necessary to construct <code>Sprite</code> objects and initialize some values. Define a new constructor in the body of the <code>Sprite</code> class that should take in a <code>Vector2</code> value, and set the <code>position</code> field based on the value:</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Sprite</span>(<span class="hljs-params">Vector2 position</span>)
</span>{
    <span class="hljs-keyword">this</span>.position = position;
}
</code></pre>
<h3 id="drawing">Drawing</h3>
<p>One other thing that is identical in the <code>Player</code> and <code>Enemy</code> classes is the <code>Draw</code> method. Copy that over into the body of the <code>Sprite</code> class:</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Draw</span>(<span class="hljs-params">GameTime gameTime, SpriteBatch spriteBatch</span>)
</span>{
    spriteBatch.Draw(spriteImage, PositionRectangle, Color.White);
}
</code></pre>
<h3 id="enemy-class-code"><code>Enemy</code> Class Code</h3>
<p>At this point, the code in the <strong>Enemy.cs</strong> file should look something like this:</p>
<pre><code class="lang-cs"><span class="hljs-keyword">using</span> Microsoft.Xna.Framework;
<span class="hljs-keyword">using</span> Microsoft.Xna.Framework.Graphics;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">ArcadeFlyer2D</span>
{
    <span class="hljs-keyword">class</span> <span class="hljs-title">Sprite</span>
    {
        <span class="hljs-keyword">private</span> Vector2 position;
        <span class="hljs-keyword">private</span> Texture2D spriteImage;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> spriteWidth;

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> SpriteHeight
        {
            <span class="hljs-keyword">get</span>
            {
                <span class="hljs-keyword">float</span> scale = spriteWidth / spriteImage.Width;
                <span class="hljs-keyword">return</span> spriteImage.Height * scale;
            }
        }

        <span class="hljs-keyword">public</span> Rectangle PositionRectangle
        {
            <span class="hljs-keyword">get</span>
            {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Rectangle((<span class="hljs-keyword">int</span>)position.X, (<span class="hljs-keyword">int</span>)position.Y, (<span class="hljs-keyword">int</span>)spriteWidth, (<span class="hljs-keyword">int</span>)SpriteHeight);
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Sprite</span>(<span class="hljs-params">Vector2 position</span>)
        </span>{
            <span class="hljs-keyword">this</span>.position = position;
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Draw</span>(<span class="hljs-params">GameTime gameTime, SpriteBatch spriteBatch</span>)
        </span>{
            spriteBatch.Draw(spriteImage, PositionRectangle, Color.White);
        }
    }
}
</code></pre>
<h2 id="updating-the-player-class">Updating the <code>Player</code> Class</h2>
<p>Now that the <code>Sprite</code> class has been created, it&apos;s time to use it! Make the <code>Player</code> class inherit from the <code>Sprite</code> class by adding <code>: Sprite</code> at the end of the class declaration:</p>
<pre><code class="lang-cs"><span class="hljs-keyword">class</span> <span class="hljs-title">Player</span> : <span class="hljs-title">Sprite</span>
{
    <span class="hljs-comment">// Player code</span>
}
</code></pre>
<p>Next, it is necessary to call the <code>base</code> constructor from the <code>Player</code> constructor. Add <code>: base()</code> after the method signature for the constructor, and pass in the <code>position</code> value:</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Player</span>(<span class="hljs-params">ArcadeFlyerGame root, Vector2 position</span>) : <span class="hljs-title">base</span>(<span class="hljs-params">position</span>)
</span>{
    <span class="hljs-comment">// Constructor code</span>
}
</code></pre>
<p>After that comes the fun part: remove all of the repeated code from the <code>Player</code> class! This includes:</p>
<ul>
<li><code>position</code> field</li>
<li><code>spriteImage</code> field</li>
<li><code>spriteWidth</code> field</li>
<li><code>SpriteHeight</code> property</li>
<li><code>PositionRectangle</code> property</li>
<li><code>Draw</code> method</li>
</ul>
<p>Note that there will be some errors in the <code>Player</code> class at this point; those will be handled later.</p>
<h2 id="updating-the-enemy-class">Updating the <code>Enemy</code> Class</h2>
<p>The <code>Enemy</code> class should be updated in the same way as the <code>Player</code> class! Make <code>Enemy</code> inherit from <code>Sprite</code>, call the <code>base</code> constructor from the <code>Enemy</code> constructor, and remove all the repeated code!</p>
<h2 id="fixing-the-access-issues">Fixing the Access Issues</h2>
<p>Now everything is almost ready, but there is one small issue. When the <code>Player</code> class and the <code>Enemy</code> class attempt to access the fields from the <code>Sprite</code> class, there is an inaccessibility issue. Hovering over the error should display more information. In C#, <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/access-modifiers" target="_blank">access modifiers</a> define which parts of the code are accessible from which other parts. In general, it is helpful to hide things that should not be accessible, and show things that should be.</p>
<p>Rather than simply making the fields on the <code>Sprite</code> class <code>public</code>, a common way to fix this issue is to add properties for the fields. This way, if anything changes with the implementation of the <code>Sprite</code> class, the code that calls the property will not have to change; it will be easier to update the <code>Sprite</code> class to make it work.</p>
<p>Add <code>public</code> properties for each of the following fields:</p>
<ul>
<li><code>position</code></li>
<li><code>spriteImage</code></li>
<li><code>spriteWidth</code></li>
</ul>
<p>Additionally, update the access level for the <code>position</code> field so that it is <code>protected</code> instead. That means that the derived classes (<code>Player</code> and <code>Enemy</code>) can actually update the properties of the <code>position</code> object directly.</p>
<p>It should look something like this in the body of the  <code>Sprite</code> class:</p>
<pre><code class="lang-cs"><span class="hljs-keyword">protected</span> Vector2 position;
<span class="hljs-keyword">public</span> Vector2 Position
{
    <span class="hljs-keyword">get</span> { <span class="hljs-keyword">return</span> position; }
    <span class="hljs-keyword">set</span> { position = <span class="hljs-keyword">value</span>; }
}

<span class="hljs-keyword">private</span> Texture2D spriteImage;
<span class="hljs-keyword">public</span> Texture2D SpriteImage
{
    <span class="hljs-keyword">get</span> { <span class="hljs-keyword">return</span> spriteImage; }
    <span class="hljs-keyword">set</span> { spriteImage = <span class="hljs-keyword">value</span>; }
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> spriteWidth;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> SpriteWidth
{
    <span class="hljs-keyword">get</span> { <span class="hljs-keyword">return</span> spriteWidth; }
    <span class="hljs-keyword">set</span> { spriteWidth = <span class="hljs-keyword">value</span>; }
}
</code></pre>
<p>The last thing to do is update the erroring code in the <code>Player</code> and <code>Enemy</code> classes so that it uses the new properties instead of directly accessing the fields. The constructors and <code>LoadContent</code> methods should both be updated to use <code>SpriteWidth</code> and <code>SpriteImage</code> instead of <code>spriteWidth</code> and <code>spriteImage</code>.</p>
<h2 id="final-code">Final Code</h2>
<p>The final code for this walkthrough is available on <a href="https://github.com/hylandtechoutreach/ArcadeFlyer/tree/Part4Start" target="_blank">GitHub</a>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Part2EnemyClass.html" class="navigation navigation-prev " aria-label="Previous page: Part 2 - The Enemy Class">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../Reference.html" class="navigation navigation-next " aria-label="Next page: Reference">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Part 3 - The Sprite Class","level":"1.3.4","depth":2,"next":{"title":"Reference","level":"1.4","depth":1,"path":"Reference.md","ref":"Reference.md","articles":[]},"previous":{"title":"Part 2 - The Enemy Class","level":"1.3.3","depth":2,"path":"Walkthroughs/Part2EnemyClass.md","ref":"Walkthroughs/Part2EnemyClass.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["toggle-chapters"],"pluginsConfig":{"toggle-chapters":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"BOOKREADME.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Walkthroughs/Part3SpriteClass.md","mtime":"2020-09-09T13:57:18.576Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-09-09T13:57:57.196Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-toggle-chapters/toggle.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

